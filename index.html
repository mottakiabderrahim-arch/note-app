<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù…ÙÙƒØ±ØªÙŠ</title>

<style>
body{
  font-family: Arial;
  margin:0;
  padding:15px;
  background:#f5f5f5;
  transition:0.3s;
}

.dark{
  background:#1e1e1e;
  color:white;
}

input,button{
  padding:8px;
  margin:5px 0;
}

.note{
  background:white;
  padding:10px;
  margin-top:10px;
  border-radius:8px;
}

.dark .note{
  background:#2c2c2c;
}

#noteText{
  min-height:120px;
  padding:10px;
  border:1px solid #ccc;
  border-radius:8px;
  outline:none;
  background:white;
}

.dark #noteText{
  background:#333;
  color:white;
}

.toolbar button{
  margin:2px;
}
</style>
</head>

<body>

<h2>ğŸ“’ Ù…ÙÙƒØ±ØªÙŠ</h2>

<button onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button>

<input type="text" id="search" placeholder="Ø¨Ø­Ø«..." oninput="displayNotes()">

<br>

<input type="text" id="noteTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©">

<div class="toolbar">

<button onclick="format('bold')"><b>B</b></button>
<button onclick="format('italic')"><i>I</i></button>
<button onclick="format('underline')"><u>U</u></button>

<button onclick="setColor('red')">ğŸ”´</button>
<button onclick="setColor('blue')">ğŸ”µ</button>
<button onclick="setColor('green')">ğŸŸ¢</button>
<button onclick="setColor('black')">âš«</button>

<button onclick="highlight('yellow')">ğŸŸ¡</button>

<button onclick="fontSize(3)">A-</button>
<button onclick="fontSize(5)">A+</button>

<button onclick="addLink()">ğŸ”—</button>
<button onclick="addImage()">ğŸ“·</button>
<button onclick="clearFormat()">ğŸ§¹</button>

</div>

<div id="noteText" contenteditable="true"></div>

<br>

<input type="datetime-local" id="reminder">

<br>

<button onclick="addNote()">â• Ø¥Ø¶Ø§ÙØ©</button>
<button onclick="deleteAll()">ğŸ—‘ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>

<div id="notes"></div>

<script>

let notes = JSON.parse(localStorage.getItem("notes")) || [];

/* ===== Ù…Ø­Ø±Ø± ===== */

function format(cmd){
  document.execCommand(cmd,false,null);
}

function setColor(color){
  document.execCommand("foreColor",false,color);
}

function highlight(color){
  document.execCommand("hiliteColor",false,color);
}

function fontSize(size){
  document.execCommand("fontSize",false,size);
}

function addLink(){
  let url = prompt("Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·:");
  if(url){
    document.execCommand("createLink",false,url);
  }
}

function addImage(){
  let input = document.createElement("input");
  input.type="file";
  input.accept="image/*";

  input.onchange=function(){
    let file=this.files[0];
    let reader=new FileReader();
    reader.onload=function(e){
      document.execCommand("insertImage",false,e.target.result);
    };
    reader.readAsDataURL(file);
  };

  input.click();
}

function clearFormat(){
  document.execCommand("removeFormat",false,null);
}

/* Ù„ØµÙ‚ Ù†Ø¸ÙŠÙ */
document.getElementById("noteText").addEventListener("paste",function(e){
  e.preventDefault();
  let text=(e.clipboardData||window.clipboardData).getData("text");
  document.execCommand("insertText",false,text);
});

/* ===== Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø© ===== */

function addNote(){

  let title=document.getElementById("noteTitle").value;
  let text=document.getElementById("noteText").innerHTML;
  let reminder=document.getElementById("reminder").value;

  if(!title && !text) return;

  notes.push({
    id:Date.now(),
    title:title,
    text:text,
    date:new Date().toLocaleString(),
    reminder: reminder ? new Date(reminder).getTime() : null,
    notified:false
  });

  localStorage.setItem("notes",JSON.stringify(notes));

  document.getElementById("noteTitle").value="";
  document.getElementById("noteText").innerHTML="";
  document.getElementById("reminder").value="";

  displayNotes();
}

function displayNotes(){

  let search=document.getElementById("search").value.toLowerCase();
  let container=document.getElementById("notes");
  container.innerHTML="";

  notes.slice().reverse().forEach(note=>{

    if(note.title.toLowerCase().includes(search) ||
       note.text.toLowerCase().includes(search)){

      container.innerHTML+=`
        <div class="note">
          <h3>${note.title}</h3>
          <div>${note.text}</div>
          <small>${note.date}</small><br>
          <button onclick="deleteNote(${note.id})">âŒ Ø­Ø°Ù</button>
        </div>
      `;
    }
  });
}

function deleteNote(id){
  notes=notes.filter(n=>n.id!==id);
  localStorage.setItem("notes",JSON.stringify(notes));
  displayNotes();
}

function deleteAll(){
  if(confirm("ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ø§Ù„ÙƒÙ„ØŸ")){
    notes=[];
    localStorage.removeItem("notes");
    displayNotes();
  }
}

/* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ===== */

function toggleDark(){
  document.body.classList.toggle("dark");
}

/* ===== Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ===== */

if("Notification" in window){
  Notification.requestPermission();
}

function checkReminders(){
  let now=Date.now();

  notes.forEach(note=>{
    if(note.reminder && !note.notified){
      if(now>=note.reminder){
        new Notification("ğŸ”” ØªØ°ÙƒÙŠØ±",{
          body:note.title
        });
        note.notified=true;
        localStorage.setItem("notes",JSON.stringify(notes));
      }
    }
  });
}

setInterval(checkReminders,30000);

displayNotes();

</script>

</body>
</html>
