<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>SmartNote Pro</title>

<style>
body{
font-family:Arial;
margin:0;
padding:15px;
background:#f0f2f5;
transition:0.3s;
}

.dark{
background:#121212;
color:white;
}

h2{
margin:0 0 10px 0;
}

input,button{
padding:10px;
margin:5px 0;
border-radius:6px;
border:none;
}

button{
background:#1976d2;
color:white;
cursor:pointer;
}

.note{
background:white;
padding:12px;
margin-top:10px;
border-radius:10px;
box-shadow:0 2px 6px rgba(0,0,0,0.2);
cursor:pointer;
}

.dark .note{
background:#1e1e1e;
}

#editor{
min-height:150px;
background:white;
padding:10px;
border-radius:10px;
border:1px solid #ccc;
outline:none;
}

.dark #editor{
background:#2a2a2a;
color:white;
}

.toolbar button{
background:#444;
margin:2px;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ */
.lockScreen{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:black;
color:white;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:9999;
}

/* Ø´Ø§Ø´Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
.viewer{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:white;
overflow:auto;
padding:20px;
z-index:9998;
}

.dark .viewer{
background:#121212;
color:white;
}

.viewer button{
margin-top:10px;
}
</style>

</head>
<body>

<h2>ğŸ§  SmartNote Pro</h2>

<button onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button>
<button onclick="lockApp()">ğŸ”’ Ù‚ÙÙ„</button>

<br>

<input id="search" placeholder="ğŸ” Ø¨Ø­Ø«" oninput="displayNotes()">

<br>

<input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©">

<div class="toolbar">

<button onclick="format('bold')"><b>B</b></button>
<button onclick="format('italic')"><i>I</i></button>
<button onclick="format('underline')"><u>U</u></button>

<button onclick="color('red')">ğŸ”´</button>
<button onclick="color('blue')">ğŸ”µ</button>
<button onclick="color('green')">ğŸŸ¢</button>

<button onclick="size(3)">A-</button>
<button onclick="size(5)">A+</button>

<button onclick="image()">ğŸ“·</button>

<button onclick="table()">ğŸ“Š</button>

</div>

<div id="editor" contenteditable="true"></div>

<br>

<button onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸</button>

<div id="notes"></div>

<script>

let notes=JSON.parse(localStorage.getItem("smartNotes"))||[];
let editingId=null;

/* ØªÙ†Ø³ÙŠÙ‚ */
function format(cmd){
document.execCommand(cmd,false,null);
}

function color(c){
document.execCommand("foreColor",false,c);
}

function size(s){
document.execCommand("fontSize",false,s);
}

/* Ø¥Ø¯Ø±Ø§Ø¬ ØµÙˆØ±Ø© */
function image(){

let input=document.createElement("input");

input.type="file";

input.onchange=function(){

let file=this.files[0];

let reader=new FileReader();

reader.onload=function(e){

document.execCommand("insertImage",false,e.target.result);

}

reader.readAsDataURL(file);

}

input.click();

}

/* Ø¬Ø¯ÙˆÙ„ */
function table(){

let html="<table border=1 style='width:100%'>";

html+="<tr><td contenteditable=true>Ø®Ø§Ù†Ø©</td><td contenteditable=true>Ø®Ø§Ù†Ø©</td></tr>";

html+="<tr><td contenteditable=true>Ø®Ø§Ù†Ø©</td><td contenteditable=true>Ø®Ø§Ù†Ø©</td></tr>";

html+="</table>";

document.execCommand("insertHTML",false,html);

}

/* Ø­ÙØ¸ Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ */
function saveNote(){

let title=document.getElementById("title").value;
let text=document.getElementById("editor").innerHTML;

if(!title && !text)return;

if(editingId){

let n=notes.find(x=>x.id==editingId);
n.title=title;
n.text=text;
editingId=null;

}else{

notes.push({
id:Date.now(),
title:title,
text:text,
pinned:false
});

}

localStorage.setItem("smartNotes",JSON.stringify(notes));

document.getElementById("title").value="";
document.getElementById("editor").innerHTML="";

displayNotes();

}

/* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª */
function displayNotes(){

let search=document.getElementById("search").value.toLowerCase();
let div=document.getElementById("notes");

div.innerHTML="";

notes.sort((a,b)=>b.pinned-a.pinned);

notes.forEach(n=>{

if(n.title.toLowerCase().includes(search) || n.text.toLowerCase().includes(search)){

div.innerHTML+=`

<div class="note" onclick="openNote(${n.id})">

<h3>${n.pinned?"ğŸ“Œ ":""}${n.title}</h3>

<div>${n.text.substring(0,100)}...</div>

<button onclick="event.stopPropagation();pin(${n.id})">ğŸ“Œ</button>

<button onclick="event.stopPropagation();del(${n.id})">ğŸ—‘ï¸</button>

</div>

`;

}

});

}

/* ÙØªØ­ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
function openNote(id){

let n=notes.find(x=>x.id==id);

let view=document.createElement("div");

view.className="viewer";

view.innerHTML=`

<h2>${n.title}</h2>

<div>${n.text}</div>

<button onclick="edit(${n.id})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>

<button onclick="this.parentElement.remove()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>

`;

document.body.appendChild(view);

}

/* ØªØ¹Ø¯ÙŠÙ„ */
function edit(id){

let n=notes.find(x=>x.id==id);

document.getElementById("title").value=n.title;
document.getElementById("editor").innerHTML=n.text;

editingId=id;

document.querySelector(".viewer").remove();

window.scrollTo(0,0);

}

/* ØªØ«Ø¨ÙŠØª */
function pin(id){

let n=notes.find(x=>x.id==id);
n.pinned=!n.pinned;

localStorage.setItem("smartNotes",JSON.stringify(notes));

displayNotes();

}

/* Ø­Ø°Ù Ù…Ø¹ ØªØ£ÙƒÙŠØ¯ */
function del(id){

if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ")){

notes=notes.filter(x=>x.id!=id);

localStorage.setItem("smartNotes",JSON.stringify(notes));

displayNotes();

}

}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
function toggleDark(){

document.body.classList.toggle("dark");

}

/* Ø§Ù„Ù‚ÙÙ„ */
function lockApp(){

let pass=prompt("Ø¶Ø¹ Ø±Ù…Ø² Ø§Ù„Ù‚ÙÙ„");

localStorage.setItem("lockPass",pass);

location.reload();

}

let pass=localStorage.getItem("lockPass");

if(pass){

let lock=document.createElement("div");

lock.className="lockScreen";

lock.innerHTML=`

<h2>ğŸ”’ Ù…Ù‚ÙÙ„</h2>

<input id="unlock">

<button onclick="unlock()">ÙØªØ­</button>

`;

document.body.appendChild(lock);

}

function unlock(){

let p=document.getElementById("unlock").value;

if(p===localStorage.getItem("lockPass"))

document.querySelector(".lockScreen").remove();

}

displayNotes();

</script>

</body>
</html>
