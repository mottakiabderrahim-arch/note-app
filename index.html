<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…ÙÙƒØ±ØªÙŠ</title>

<style>
:root{
  --bg:#f2f2f2;
  --card:#ffffff;
  --text:#000000;
  --main:#2196f3;
}

body.dark{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#ffffff;
  --main:#333333;
}

body{
  margin:0;
  font-family:Arial;
  background:var(--bg);
  color:var(--text);
}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ */
#lockScreen{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:#121212;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

#lockScreen input{
  padding:10px;
  font-size:18px;
  margin-top:10px;
  text-align:center;
}

header{
  background:var(--main);
  color:white;
  padding:15px;
  text-align:center;
  font-size:20px;
  position:relative;
}

.darkBtn{
  position:absolute;
  left:15px;
  top:12px;
  background:white;
  color:black;
  border:none;
  padding:5px 10px;
  font-size:14px;
}

.container{
  padding:15px;
}

textarea{
  width:100%;
  height:70px;
  padding:10px;
  font-size:16px;
  box-sizing:border-box;
}

input, select{
  width:100%;
  padding:8px;
  margin-top:10px;
  box-sizing:border-box;
}

button{
  margin-top:10px;
  padding:10px;
  width:100%;
  background:var(--main);
  color:white;
  border:none;
  font-size:16px;
}

.note{
  background:var(--card);
  padding:10px;
  margin-top:10px;
  border-radius:5px;
  position:relative;
}

.delete{
  position:absolute;
  left:10px;
  top:10px;
  background:red;
  color:white;
  border:none;
  padding:5px 8px;
  font-size:12px;
}
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ -->
<div id="lockScreen">
  <h2 style="color:white;">ğŸ”’ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²</h2>
  <input type="password" id="pinInput" placeholder="Ø£Ø¯Ø®Ù„ PIN">
  <button onclick="checkPin()">Ø¯Ø®ÙˆÙ„</button>
</div>

<header>
  Ù…ÙÙƒØ±ØªÙŠ
  <button class="darkBtn" onclick="toggleDark()">ğŸŒ™</button>
</header>

<div class="container">

  <textarea id="noteInput" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..."></textarea>
  <button onclick="addNote()">Ø¥Ø¶Ø§ÙØ©</button>

  <input type="text" id="searchInput" placeholder="Ø¨Ø­Ø«..." onkeyup="displayNotes()">

  <select id="sortSelect" onchange="displayNotes()">
    <option value="new">Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
    <option value="old">Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹</option>
  </select>

  <button onclick="deleteAll()" style="background:red;">
    ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„
  </button>

  <div id="notesContainer"></div>

</div>

<script>

// ===== Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ =====
let savedPin = localStorage.getItem("appPin");

if(!savedPin){
  let newPin = prompt("Ø£Ù†Ø´Ø¦ Ø±Ù…Ø² Ø³Ø±ÙŠ Ø¬Ø¯ÙŠØ¯ (PIN):");
  if(newPin){
    localStorage.setItem("appPin", newPin);
    savedPin = newPin;
  }
}

function checkPin(){
  let input = document.getElementById("pinInput").value;
  if(input === savedPin){
    document.getElementById("lockScreen").style.display="none";
  }else{
    alert("Ø±Ù…Ø² Ø®Ø§Ø·Ø¦!");
  }
}

// ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
let notes = JSON.parse(localStorage.getItem("notes")) || [];

// ===== Ø¹Ø±Ø¶ =====
function displayNotes(){
  let container = document.getElementById("notesContainer");
  let searchValue = document.getElementById("searchInput").value.toLowerCase();
  let sortValue = document.getElementById("sortSelect").value;

  container.innerHTML = "";

  let notesCopy = [...notes];

  if(sortValue === "new"){
    notesCopy.reverse();
  }

  notesCopy.forEach((note) => {

    if(note.toLowerCase().includes(searchValue)){

      let div = document.createElement("div");
      div.className = "note";
      div.textContent = note;

      let del = document.createElement("button");
      del.textContent = "Ø­Ø°Ù";
      del.className = "delete";
      del.onclick = function(){
        let realIndex = notes.indexOf(note);
        deleteNote(realIndex);
      };

      div.appendChild(del);
      container.appendChild(div);
    }

  });
}

// ===== Ø¥Ø¶Ø§ÙØ© =====
function addNote(){
  let input = document.getElementById("noteInput");
  if(input.value.trim() === "") return;

  notes.push(input.value);
  localStorage.setItem("notes", JSON.stringify(notes));
  input.value = "";
  displayNotes();
}

// ===== Ø­Ø°Ù =====
function deleteNote(index){
  notes.splice(index,1);
  localStorage.setItem("notes", JSON.stringify(notes));
  displayNotes();
}

// ===== Ø­Ø°Ù Ø§Ù„ÙƒÙ„ =====
function deleteAll(){
  if(confirm("ÙˆØ§Ø´ Ù…ØªØ£ÙƒØ¯ Ø¨ØºÙŠØªÙŠ ØªÙ…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŸ")){
    notes = [];
    localStorage.setItem("notes", JSON.stringify(notes));
    displayNotes();
  }
}

// ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ =====
function toggleDark(){
  document.body.classList.toggle("dark");

  if(document.body.classList.contains("dark")){
    localStorage.setItem("darkMode","on");
  }else{
    localStorage.setItem("darkMode","off");
  }
}

if(localStorage.getItem("darkMode") === "on"){
  document.body.classList.add("dark");
}

displayNotes();

</script>

</body>
</html>
