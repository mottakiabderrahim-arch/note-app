<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>SmartNote Pro</title>

<style>
body{
font-family:Arial;
margin:0;
background:#f0f2f5;
}

header{
background:#1976d2;
color:white;
padding:15px;
font-size:20px;
}

.container{
padding:15px;
}

button{
padding:10px;
margin:5px;
border:none;
border-radius:8px;
background:#1976d2;
color:white;
cursor:pointer;
}

.note{
background:white;
padding:15px;
margin-top:10px;
border-radius:12px;
box-shadow:0 2px 6px rgba(0,0,0,0.2);
cursor:pointer;
}

#editor{
min-height:200px;
border:1px solid #ccc;
padding:10px;
border-radius:10px;
background:white;
}

.toolbar button{
background:#444;
}

.hidden{
display:none;
}

.lockScreen{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:black;
color:white;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:9999;
}

</style>
</head>

<body>

<header>
ğŸ§  SmartNote Pro
</header>

<div class="container">

<div id="listView">

<input id="search" placeholder="ğŸ” Ø¨Ø­Ø«" oninput="displayNotes()">

<br>

<button onclick="newNote()">â• Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
<button onclick="lockApp()">ğŸ”’ Ù‚ÙÙ„</button>

<div id="notes"></div>

</div>


<div id="editorView" class="hidden">

<button onclick="back()">â¬… Ø±Ø¬ÙˆØ¹</button>

<input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù†">

<div class="toolbar">

<button onclick="format('bold')"><b>B</b></button>
<button onclick="format('italic')"><i>I</i></button>
<button onclick="format('underline')"><u>U</u></button>

<button onclick="color('red')">ğŸ”´</button>
<button onclick="color('blue')">ğŸ”µ</button>
<button onclick="color('green')">ğŸŸ¢</button>

<button onclick="size(3)">A-</button>
<button onclick="size(5)">A+</button>

<button onclick="insertImage()">ğŸ“·</button>
<button onclick="insertTable()">ğŸ“Š</button>

</div>

<div id="editor" contenteditable="true"></div>

<br>

<button onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸</button>
<button onclick="deleteNote()">ğŸ—‘ Ø­Ø°Ù</button>
<button onclick="exportPDF()">ğŸ“„ PDF</button>
<button onclick="pinNote()">ğŸ“Œ ØªØ«Ø¨ÙŠØª</button>

</div>

</div>

<script>

let notes = JSON.parse(localStorage.getItem("smartNotes")||"[]");

let current=null;

function newNote(){

current=null;

document.getElementById("title").value="";
document.getElementById("editor").innerHTML="";

openEditor();

}

function openEditor(){

listView.classList.add("hidden");
editorView.classList.remove("hidden");

}

function back(){

editorView.classList.add("hidden");
listView.classList.remove("hidden");

displayNotes();

}

function saveNote(){

let title=titleInput();
let text=editorHTML();

if(!title && !text)return;

if(current){

current.title=title;
current.text=text;

}else{

notes.push({

id:Date.now(),
title:title,
text:text,
pinned:false,
date:new Date().toLocaleString()

});

}

saveStorage();
back();

}

function deleteNote(){

if(!current)return;

if(confirm("ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ")){

notes=notes.filter(n=>n.id!=current.id);
saveStorage();
back();

}

}

function pinNote(){

if(!current)return;

current.pinned=!current.pinned;
saveStorage();

}

function displayNotes(){

let s=search.value.toLowerCase();

notes.sort((a,b)=>b.pinned-a.pinned);

notesDiv().innerHTML="";

notes.forEach(n=>{

if(n.title.toLowerCase().includes(s)||n.text.toLowerCase().includes(s)){

let div=document.createElement("div");

div.className="note";

div.innerHTML=`

<h3>${n.pinned?"ğŸ“Œ ":""}${n.title}</h3>
<div>${n.text.substring(0,100)}</div>
<small>${n.date}</small>

`;

div.onclick=()=>{

current=n;

title.value=n.title;
editor.innerHTML=n.text;

openEditor();

};

notesDiv().appendChild(div);

}

});

}

function saveStorage(){

localStorage.setItem("smartNotes",JSON.stringify(notes));

}

function titleInput(){

return document.getElementById("title").value;

}

function editorHTML(){

return document.getElementById("editor").innerHTML;

}

function notesDiv(){

return document.getElementById("notes");

}


function format(cmd){

document.execCommand(cmd,false,null);

}

function color(c){

document.execCommand("foreColor",false,c);

}

function size(s){

document.execCommand("fontSize",false,s);

}

function insertImage(){

let input=document.createElement("input");

input.type="file";

input.onchange=function(){

let reader=new FileReader();

reader.onload=function(e){

document.execCommand("insertImage",false,e.target.result);

};

reader.readAsDataURL(input.files[0]);

};

input.click();

}

function insertTable(){

let html=`
<table border=1 style="width:100%">
<tr>
<td contenteditable=true>Ø®Ø§Ù†Ø©</td>
<td contenteditable=true>Ø®Ø§Ù†Ø©</td>
</tr>
<tr>
<td contenteditable=true>Ø®Ø§Ù†Ø©</td>
<td contenteditable=true>Ø®Ø§Ù†Ø©</td>
</tr>
</table>
`;

document.execCommand("insertHTML",false,html);

}


function exportPDF(){

let w=window.open("");

w.document.write(`
<html>
<head>
<title>PDF</title>
</head>
<body>
<h2>${titleInput()}</h2>
${editorHTML()}
<script>
window.print();
<\/script>
</body>
</html>
`);

}


function lockApp(){

let pass=prompt("Ø¶Ø¹ Ø±Ù…Ø²");

localStorage.setItem("lockPass",pass);

location.reload();

}


let pass=localStorage.getItem("lockPass");

if(pass){

let div=document.createElement("div");

div.className="lockScreen";

div.innerHTML=`

<h2>ğŸ”’ Ù…Ù‚ÙÙ„</h2>

<input id="unlock">

<button onclick="unlock()">ÙØªØ­</button>

`;

document.body.appendChild(div);

}

function unlock(){

if(unlockInput()==localStorage.getItem("lockPass")){

document.querySelector(".lockScreen").remove();

}

}

function unlockInput(){

return document.getElementById("unlock").value;

}

displayNotes();

</script>

</body>
</html>
