<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…ÙÙƒØ±ØªÙŠ</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f2f2f2;
}

header{
  background:#333;
  color:#fff;
  padding:10px;
  text-align:center;
}

#tools{
  display:flex;
  gap:5px;
  padding:10px;
  flex-wrap:wrap;
  background:#fff;
}

#tools button{
  padding:5px 10px;
  cursor:pointer;
}

#editor{
  min-height:120px;
  padding:10px;
  margin:10px;
  background:#fff;
  border:1px solid #ccc;
}

.note{
  background:#fff;
  margin:10px;
  padding:10px;
  border-radius:5px;
}

.note img{
  max-width:100%;
  margin-top:5px;
}

.meta{
  font-size:12px;
  color:#666;
  margin-top:5px;
}

.delete{
  color:red;
  cursor:pointer;
  font-size:12px;
}
</style>
</head>

<body>

<header>ğŸ“’ Ù…ÙÙƒØ±ØªÙŠ</header>

<div id="tools">
  <button onclick="addNote()">ğŸ’¾ Ø­ÙØ¸</button>
  <button onclick="bold()">B</button>
  <button onclick="color('red')">ğŸ”´</button>
  <button onclick="color('blue')">ğŸ”µ</button>
  <button onclick="fontSize(1)">A+</button>
  <button onclick="fontSize(-1)">A-</button>
  <input type="file" accept="image/*" onchange="addImage(event)">
</div>

<div id="editor" contenteditable="true">
Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§...
</div>

<div id="notes"></div>

<script>
let notes = JSON.parse(localStorage.getItem("notes") || "[]");

function saveNotes(){
  localStorage.setItem("notes", JSON.stringify(notes));
}

function addNote(){
  let content = document.getElementById("editor").innerHTML.trim();
  if(!content) return;

  let now = new Date().toLocaleString("ar-MA");

  notes.unshift({
    html: content,
    created: now,
    updated: now
  });

  saveNotes();
  document.getElementById("editor").innerHTML = "";
  render();
}

function render(){
  let box = document.getElementById("notes");
  box.innerHTML = "";

  notes.forEach((n,i)=>{
    let d = document.createElement("div");
    d.className="note";
    d.innerHTML = `
      ${n.html}
      <div class="meta">
        ğŸ•’ Ø¥Ù†Ø´Ø§Ø¡: ${n.created}<br>
        âœï¸ ØªØ¹Ø¯ÙŠÙ„: ${n.updated}<br>
        <span class="delete" onclick="del(${i})">ğŸ—‘ Ø­Ø°Ù</span>
      </div>
    `;
    box.appendChild(d);
  });
}

function del(i){
  notes.splice(i,1);
  saveNotes();
  render();
}

function bold(){
  wrap("b");
}

function color(c){
  wrap("span",`color:${c}`);
}

function fontSize(v){
  let sel = window.getSelection();
  if(!sel.rangeCount) return;
  let r = sel.getRangeAt(0);
  let s = document.createElement("span");
  s.style.fontSize = v>0 ? "larger" : "smaller";
  r.surroundContents(s);
}

function wrap(tag,style){
  let sel = window.getSelection();
  if(!sel.rangeCount) return;
  let r = sel.getRangeAt(0);
  let el = document.createElement(tag);
  if(style) el.style = style;
  r.surroundContents(el);
}

function addImage(e){
  let file = e.target.files[0];
  if(!file) return;
  let reader = new FileReader();
  reader.onload = ()=>{
    document.getElementById("editor").innerHTML +=
      `<img src="${reader.result}">`;
  };
  reader.readAsDataURL(file);
}

render();
</script>

</body>
</html>
