<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>SmartNote Pro Ultimate</title>

<style>

body{
font-family:Arial;
margin:0;
background:#f0f2f5;
}

header{
background:#1976d2;
color:white;
padding:15px;
font-size:20px;
display:flex;
justify-content:space-between;
align-items:center;
}

button{
padding:8px;
border:none;
border-radius:6px;
margin:3px;
cursor:pointer;
}

.primary{background:#1976d2;color:white;}
.danger{background:#e53935;color:white;}
.gray{background:#555;color:white;}

#notesList{
padding:10px;
}

.noteCard{
background:white;
padding:15px;
margin-bottom:10px;
border-radius:10px;
box-shadow:0 2px 5px rgba(0,0,0,0.2);
}

.hidden{
display:none;
}

#editor{
min-height:200px;
border:1px solid #ccc;
padding:10px;
border-radius:10px;
background:white;
}

.toolbar button{
background:#444;
color:white;
}

</style>
</head>
<body>

<header>

<span>ğŸ§  SmartNote Pro Ultimate</span>

<div>

<button onclick="showEditor()">â•</button>

<button onclick="backup()">ğŸ’¾</button>

<button onclick="restore()">ğŸ“‚</button>

<button onclick="toggleMenu()">â‹®</button>

</div>

</header>

<div id="menu" class="hidden" style="padding:10px;">
<button onclick="toggleDark()" class="gray">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button>
</div>

<div style="padding:10px;">

<input id="search" placeholder="ğŸ” Ø¨Ø­Ø«" oninput="displayNotes()" style="width:100%;padding:10px;">

</div>

<div id="notesList"></div>

<div id="editorScreen" class="hidden" style="padding:10px;">

<input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù†" style="width:100%;padding:10px;">

<input type="datetime-local" id="reminder">

<div class="toolbar">

<button onclick="format('bold')"><b>B</b></button>
<button onclick="format('italic')"><i>I</i></button>
<button onclick="format('underline')"><u>U</u></button>

<button onclick="color('red')">ğŸ”´</button>
<button onclick="color('blue')">ğŸ”µ</button>
<button onclick="highlight()">ğŸŸ¡</button>

<button onclick="size(3)">A-</button>
<button onclick="size(5)">A+</button>

<button onclick="image()">ğŸ“·</button>
<button onclick="table()">ğŸ“Š</button>

</div>

<div id="editor" contenteditable="true"></div>

<br>

<button onclick="saveNote()" class="primary">ğŸ’¾ Ø­ÙØ¸</button>

<button onclick="cancelEdit()" class="gray">â¬… Ø±Ø¬ÙˆØ¹</button>

<button onclick="exportPDF()" class="primary">ğŸ“„ PDF</button>

</div>

<script>

let notes=JSON.parse(localStorage.getItem("notes"))||[];
let current=null;

function toggleMenu(){
menu.classList.toggle("hidden");
}

function toggleDark(){
document.body.style.background=
document.body.style.background=="black"?"#f0f2f5":"black";
}

function showEditor(note=null){

editorScreen.classList.remove("hidden");
notesList.classList.add("hidden");

if(note){
current=note.id;
title.value=note.title;
editor.innerHTML=note.text;
reminder.value=note.reminder||"";
}else{
current=null;
title.value="";
editor.innerHTML="";
}

}

function cancelEdit(){
editorScreen.classList.add("hidden");
notesList.classList.remove("hidden");
displayNotes();
}

function saveNote(){

if(!title.value && !editor.innerHTML)return;

let note={
id:current||Date.now(),
title:title.value,
text:editor.innerHTML,
date:new Date().toLocaleString(),
pinned:false,
reminder:reminder.value
};

if(current){

let i=notes.findIndex(n=>n.id==current);
notes[i]=note;

}else{
notes.push(note);
}

localStorage.setItem("notes",JSON.stringify(notes));

cancelEdit();

}

function displayNotes(){

notesList.innerHTML="";

let search=document.getElementById("search").value.toLowerCase();

notes
.sort((a,b)=>b.pinned-a.pinned)
.forEach(n=>{

if(!n.title.toLowerCase().includes(search)
&&!n.text.toLowerCase().includes(search))return;

notesList.innerHTML+=`

<div class="noteCard">

<h3 onclick="openNote(${n.id})">${n.title}</h3>

<small>${n.date}</small>

<br>

<button onclick="pin(${n.id})">ğŸ“Œ</button>

<button onclick="edit(${n.id})">âœï¸</button>

<button onclick="del(${n.id})" class="danger">ğŸ—‘</button>

</div>

`;

});

}

function openNote(id){

let n=notes.find(x=>x.id==id);

alert(n.title+"\n\n"+n.text.replace(/<[^>]*>/g,''));

}

function edit(id){
let n=notes.find(x=>x.id==id);
showEditor(n);
}

function del(id){

if(!confirm("ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ"))return;

notes=notes.filter(x=>x.id!=id);

localStorage.setItem("notes",JSON.stringify(notes));

displayNotes();

}

function pin(id){

let n=notes.find(x=>x.id==id);

n.pinned=!n.pinned;

localStorage.setItem("notes",JSON.stringify(notes));

displayNotes();

}

function format(cmd){
document.execCommand(cmd,false,null);
}

function color(c){
document.execCommand("foreColor",false,c);
}

function highlight(){
document.execCommand("hiliteColor",false,"yellow");
}

function size(s){
document.execCommand("fontSize",false,s);
}

function image(){

let input=document.createElement("input");

input.type="file";

input.onchange=function(){

let reader=new FileReader();

reader.onload=function(e){

document.execCommand("insertImage",false,e.target.result);

}

reader.readAsDataURL(input.files[0]);

}

input.click();

}

function table(){

let html="<table border=1 style='width:100%'>";
html+="<tr><td contenteditable=true>Ø®Ø§Ù†Ø©</td><td contenteditable=true>Ø®Ø§Ù†Ø©</td></tr>";
html+="</table>";

document.execCommand("insertHTML",false,html);

}

function exportPDF(){

let w=window.open();

w.document.write("<h1>"+title.value+"</h1>");
w.document.write(editor.innerHTML);
w.print();

}

function backup(){

let data=JSON.stringify(notes);

let blob=new Blob([data]);

let a=document.createElement("a");

a.href=URL.createObjectURL(blob);

a.download="backup.smartnote";

a.click();

}

function restore(){

let input=document.createElement("input");

input.type="file";

input.onchange=function(){

let reader=new FileReader();

reader.onload=function(){

notes=JSON.parse(reader.result);

localStorage.setItem("notes",JSON.stringify(notes));

displayNotes();

};

reader.readAsText(input.files[0]);

};

input.click();

}

displayNotes();

</script>

</body>
</html>
