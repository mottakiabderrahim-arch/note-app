<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…ÙÙƒØ±ØªÙŠ</title>

<style>
:root{
  --bg:#f2f2f2;
  --card:#fff;
  --text:#000;
  --main:#2196f3;
}

body.dark{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#fff;
}

body{
  margin:0;
  font-family:sans-serif;
  background:var(--bg);
  color:var(--text);
}

header{
  background:var(--main);
  color:white;
  padding:12px;
  text-align:center;
  font-size:18px;
  position:relative;
}

.menu-btn{
  position:absolute;
  left:10px;
  top:8px;
  font-size:22px;
  cursor:pointer;
}

.menu{
  display:none;
  position:absolute;
  left:10px;
  top:45px;
  background:var(--card);
  box-shadow:0 2px 6px rgba(0,0,0,.3);
  border-radius:6px;
  overflow:hidden;
  z-index:10;
}

.menu div{
  padding:10px;
  cursor:pointer;
  border-bottom:1px solid #ccc;
}

.menu div:last-child{border:none}

#container{padding:10px}

input, textarea{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:6px;
  border:1px solid #ccc;
  margin-top:8px;
}

textarea{height:120px}

button{
  margin-top:8px;
  padding:10px;
  width:100%;
  font-size:16px;
  border:none;
  border-radius:6px;
  background:#4caf50;
  color:white;
}

.note{
  background:var(--card);
  margin-top:10px;
  padding:10px;
  border-radius:6px;
  position:relative;
  font-size:var(--noteSize,16px);
}

.note-title{
  font-weight:bold;
  font-size:18px;
  margin-bottom:5px;
}

.delete{
  position:absolute;
  left:10px;
  top:10px;
  cursor:pointer;
}

.highlight{
  background:#ffeb3b;
  color:#000;
  padding:2px 4px;
  border-radius:4px;
  font-weight:bold;
}
</style>
</head>

<body>

<header>
  <span class="menu-btn" onclick="toggleMenu()">â‹®</span>
  ğŸ“’ Ù…ÙÙƒØ±ØªÙŠ
  <div class="menu" id="menu">
    <div onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</div>
    <div onclick="setPin()">ğŸ”’ Ù‚ÙÙ„ Ø¨Ø±Ù…Ø²</div>
    <div onclick="changeFont(1)">ğŸ”  ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø·</div>
    <div onclick="changeFont(-1)">ğŸ”¡ ØªØµØºÙŠØ± Ø§Ù„Ø®Ø·</div>
    <div onclick="toggleOrder()">â†•ï¸ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
    <div onclick="deleteAll()">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</div>
  </div>
</header>

<div id="container">
  <input id="search" placeholder="ğŸ” Ø¨Ø­Ø«..." oninput="showNotes()">
  <input id="title" placeholder="ğŸ“ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©">
  <textarea id="text" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..."></textarea>
  <small style="opacity:.7">ğŸ’¡ Ø§Ø³ØªØ¹Ù…Ù„ # Ù‚Ø¨Ù„ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ø§Ø´ ØªØªÙ„ÙˆÙ‘Ù† Ø¨Ø¹Ø¯ Ø§Ù„Ø­ÙØ¸</small>
  <button onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸</button>
  <div id="notes"></div>
</div>

<script>
let notes = JSON.parse(localStorage.getItem("notes") || "[]");
let editIndex = -1;
let orderNewFirst = true;
let fontSize = parseInt(localStorage.getItem("fontSize")||16);

document.documentElement.style.setProperty("--noteSize",fontSize+"px");

let pin = localStorage.getItem("pin");
if(pin){
  let p = prompt("ğŸ”’ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²");
  if(p !== pin) document.body.innerHTML="âŒ Ø±Ù…Ø² Ø®Ø§Ø·Ø¦";
}

function toggleMenu(){
  menu.style.display = menu.style.display=="block"?"none":"block";
}

function toggleDark(){
  document.body.classList.toggle("dark");
  localStorage.setItem("dark",document.body.classList.contains("dark"));
}

if(localStorage.getItem("dark")=="true"){
  document.body.classList.add("dark");
}

function setPin(){
  let p = prompt("Ø¶Ø¹ Ø±Ù…Ø² Ø§Ù„Ù‚ÙÙ„");
  if(p){ localStorage.setItem("pin",p); alert("ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ ğŸ”’"); }
}

function changeFont(v){
  fontSize+=v;
  if(fontSize<12) fontSize=12;
  localStorage.setItem("fontSize",fontSize);
  document.documentElement.style.setProperty("--noteSize",fontSize+"px");
}

function toggleOrder(){
  orderNewFirst=!orderNewFirst;
  showNotes();
}

function deleteAll(){
  if(confirm("Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŸ")){
    notes=[];
    localStorage.setItem("notes","[]");
    showNotes();
  }
}

function saveNote(){
  let t=text.value.trim();
  let ti=title.value.trim();
  if(!t && !ti) return;

  let note={title:ti,text:t};

  if(editIndex==-1) notes.push(note);
  else{ notes[editIndex]=note; editIndex=-1 }

  localStorage.setItem("notes",JSON.stringify(notes));
  text.value="";
  title.value="";
  showNotes();
}

function showNotes(){
  notesBox.innerHTML="";
  let q=search.value.toLowerCase();
  let arr=[...notes];
  if(orderNewFirst) arr.reverse();

  arr.forEach((n,i)=>{
    let content=(n.title+" "+n.text).toLowerCase();
    if(!content.includes(q)) return;

    let d=document.createElement("div");
    d.className="note";
    d.innerHTML=`
      <span class="delete" onclick="del(${i})">ğŸ—‘ï¸</span>
      <div class="note-title">${colorWords(n.title)}</div>
      <div>${colorWords(n.text)}</div>
    `;
    d.onclick=()=>{
      title.value=n.title;
      text.value=n.text;
      editIndex=i;
      window.scrollTo(0,0);
    };
    notesBox.appendChild(d);
  });
}

function del(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ")){
    notes.splice(i,1);
    localStorage.setItem("notes",JSON.stringify(notes));
    showNotes();
  }
}

function colorWords(t){
  return (t||"").split(" ").map(w=>
    w.startsWith("#")?`<span class="highlight">${w}</span>`:w
  ).join(" ");
}

const text=document.getElementById("text");
const title=document.getElementById("title");
const notesBox=document.getElementById("notes");
const search=document.getElementById("search");
const menu=document.getElementById("menu");

showNotes();
</script>

</body>
</html>
