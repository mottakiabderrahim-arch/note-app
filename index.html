<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…ÙÙƒØ±ØªÙŠ</title>

<style>
body{
    margin:0;
    font-family:sans-serif;
    background:#f5f5f5;
}
body.dark{background:#121212;color:white}

.container{max-width:600px;margin:auto;padding:8px}

#home,#editor,#settings{padding:5px}
#editor,#settings{display:none}

.note{
    background:white;
    padding:8px;
    margin-bottom:8px;
    border-radius:6px;
    cursor:pointer;
}
.note small{color:gray}

body.dark .note,
body.dark #text,
body.dark input,
body.dark #menu,
body.dark #settings{
    background:#1e1e1e;
    color:white;
}

input,button{
    padding:8px;
    font-size:15px;
    width:100%;
    margin-bottom:8px;
}

#text{
    min-height:35vh;
    border:1px solid #ddd;
    border-radius:6px;
    padding:10px;
    background:white;
}

#actions{display:flex;gap:8px}
#actions button{flex:1}

#add{
    position:fixed;
    bottom:15px;
    right:15px;
    width:48px;
    height:48px;
    border-radius:50%;
    font-size:26px;
    background:#e53935;
    color:white;
    border:none;
}

#tools{
    display:flex;
    justify-content:center;
    gap:12px;
}
.color{
    width:22px;
    height:22px;
    border-radius:50%;
    cursor:pointer;
    border:2px solid #ccc;
}
.color.active{border:3px solid #000}

#menuBtn{
    position:fixed;
    top:10px;
    right:10px;
    font-size:22px;
    cursor:pointer;
    z-index:1000;
}
#menu{
    position:fixed;
    top:40px;
    right:10px;
    background:white;
    border-radius:6px;
    box-shadow:0 2px 6px rgba(0,0,0,.2);
    display:none;
}
#menu div{padding:10px;cursor:pointer}

#lockBox{display:none}
</style>
</head>

<body>

<div id="menuBtn" onclick="toggleMenu()">â‹®</div>
<div id="menu">
    <div onclick="toggleDark()">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</div>
    <div onclick="toggleLock()">ğŸ” Ø±Ù…Ø² Ø§Ù„Ø­Ù…Ø§ÙŠØ©</div>
    <div onclick="openSettings()">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
    <div onclick="exportNotes()">ğŸ“¤ ØªØµØ¯ÙŠØ±</div>
    <div onclick="importNotes()">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</div>
    <div onclick="deleteAll()">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</div>
    <div onclick="about()">â„¹ï¸ Ø­ÙˆÙ„</div>
</div>

<div class="container">

<div id="lockBox">
    <input id="pin" type="password" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²">
    <button onclick="savePin()">Ø­ÙØ¸ Ø§Ù„Ø±Ù…Ø²</button>
</div>

<div id="home">
    <input id="search" placeholder="Ø¨Ø­Ø«...">
    <div id="notesList"></div>
</div>

<div id="editor">
    <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù†">
    <div id="text" contenteditable="true"></div>

    <div id="actions">
        <button onclick="saveNote()">Ø­ÙØ¸</button>
        <button onclick="deleteNote()">Ø­Ø°Ù</button>
        <button onclick="back()">Ø±Ø¬ÙˆØ¹</button>
    </div>

    <div id="tools">
        <div class="color" data-color="black" style="background:black"></div>
        <div class="color" data-color="red" style="background:red"></div>
        <div class="color" data-color="blue" style="background:blue"></div>
        <div class="color" data-color="green" style="background:green"></div>
    </div>
</div>

<div id="settings">
    <h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
    <button onclick="fontSize(1)">ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø·</button>
    <button onclick="fontSize(-1)">ØªØµØºÙŠØ± Ø§Ù„Ø®Ø·</button>
    <button onclick="back()">Ø±Ø¬ÙˆØ¹</button>
</div>

</div>

<button id="add" onclick="newNote()">+</button>

<script>
let notes=JSON.parse(localStorage.getItem("notes")||"[]");
let current=null;
let font=15;

const home=document.getElementById("home");
const editor=document.getElementById("editor");
const settings=document.getElementById("settings");
const list=document.getElementById("notesList");
const text=document.getElementById("text");
const title=document.getElementById("title");
const search=document.getElementById("search");
const colors=document.querySelectorAll(".color");

function toggleMenu(){
    menu.style.display=menu.style.display==="block"?"none":"block";
}
function openSettings(){
    home.style.display="none";
    editor.style.display="none";
    settings.style.display="block";
    menu.style.display="none";
}
function fontSize(v){
    font+=v;
    text.style.fontSize=font+"px";
}
function toggleDark(){
    document.body.classList.toggle("dark");
    localStorage.setItem("dark",document.body.classList.contains("dark"));
}
function savePin(){
    localStorage.setItem("pin",pin.value);
    alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
}
function exportNotes(){
    let a=document.createElement("a");
    a.href="data:text/json,"+encodeURIComponent(JSON.stringify(notes));
    a.download="notes.json";
    a.click();
}
function importNotes(){
    let i=document.createElement("input");
    i.type="file";
    i.onchange=e=>{
        let r=new FileReader();
        r.onload=()=>{notes=JSON.parse(r.result);save();render()};
        r.readAsText(e.target.files[0]);
    };
    i.click();
}
function save(){localStorage.setItem("notes",JSON.stringify(notes))}
function render(){
    list.innerHTML="";
    notes.forEach((n,i)=>{
        if(n.title.includes(search.value)){
            let d=document.createElement("div");
            d.className="note";
            d.innerHTML=`<b>${n.title}</b><br><small>${n.date}</small>`;
            d.onclick=()=>edit(i);
            list.appendChild(d);
        }
    });
}
search.oninput=render;

function newNote(){
    current=null;
    title.value="";
    text.innerHTML="";
    home.style.display="none";
    editor.style.display="block";
}
function edit(i){
    current=i;
    title.value=notes[i].title;
    text.innerHTML=notes[i].content;
    home.style.display="none";
    editor.style.display="block";
}
function saveNote(){
    let n={title:title.value||"Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†",content:text.innerHTML,date:new Date().toLocaleString()};
    current==null?notes.push(n):notes[current]=n;
    save();back();
}
function deleteNote(){
    if(current!=null){notes.splice(current,1);save();back()}
}
function deleteAll(){
    if(confirm("Ù…ØªØ£ÙƒØ¯ØŸ")){notes=[];save();render()}
}
function back(){
    editor.style.display="none";
    settings.style.display="none";
    home.style.display="block";
    render();
}
function about(){
    alert("Ù…ÙÙƒØ±ØªÙŠ\nÙ†Ø³Ø®Ø© 1.0\nØ¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª");
}

render();
if(localStorage.getItem("dark")==="true")document.body.classList.add("dark");
</script>

</body>
</html>
