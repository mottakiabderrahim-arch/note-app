<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>SmartNote Pro</title>

<style>

body{
font-family:Arial;
margin:0;
padding:15px;
background:#f0f2f5;
}

.dark{
background:#121212;
color:white;
}

button,input,select{
padding:10px;
margin:5px 0;
border-radius:6px;
border:none;
}

button{
background:#1976d2;
color:white;
}

.note{
background:white;
padding:15px;
margin-top:10px;
border-radius:10px;
box-shadow:0 2px 6px rgba(0,0,0,0.2);
}

.dark .note{
background:#1e1e1e;
}

.hidden{
display:none;
}

#editor{
min-height:150px;
background:white;
padding:10px;
border-radius:10px;
border:1px solid #ccc;
}

.dark #editor{
background:#2a2a2a;
color:white;
}

.toolbar button{
background:#444;
margin:2px;
}

</style>

</head>
<body>

<h2>ğŸ§  SmartNote Pro</h2>

<button onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button>
<button onclick="showEditor()">â• Ù…Ù„Ø§Ø­Ø¸Ø©</button>

<br>

<select id="folderSelect" onchange="displayNotes()">
<option value="all">ğŸ“ ÙƒÙ„ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª</option>
</select>

<input id="newFolder" placeholder="Ø§Ø³Ù… Ù…Ø¬Ù„Ø¯ Ø¬Ø¯ÙŠØ¯">

<button onclick="addFolder()">ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯</button>

<br>

<input id="search" placeholder="ğŸ” Ø¨Ø­Ø«" oninput="displayNotes()">

<div id="notesView"></div>

<div id="viewer" class="hidden">

<button onclick="back()">â¬… Ø±Ø¬ÙˆØ¹</button>

<h2 id="viewTitle"></h2>

<div id="viewText"></div>

<br>

<button onclick="exportPDF()">ğŸ“„ PDF</button>
<button onclick="editCurrent()">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
<button onclick="pin(currentId)">ğŸ“Œ ØªØ«Ø¨ÙŠØª</button>
<button onclick="deleteNote(currentId)">ğŸ—‘ Ø­Ø°Ù</button>

</div>

<div id="editorView" class="hidden">

<input id="title" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">

<select id="noteFolder"></select>

<input type="datetime-local" id="reminder">

<div class="toolbar">

<button onclick="format('bold')">B</button>
<button onclick="format('italic')">I</button>
<button onclick="format('underline')">U</button>

<button onclick="color('red')">ğŸ”´</button>
<button onclick="color('blue')">ğŸ”µ</button>
<button onclick="color('green')">ğŸŸ¢</button>

<button onclick="image()">ğŸ“·</button>
<button onclick="table()">ğŸ“Š</button>

</div>

<div id="editor" contenteditable="true"></div>

<br>

<button onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸</button>
<button onclick="cancelEdit()">âŒ Ø¥Ù„ØºØ§Ø¡</button>

</div>

<script>

let notes=JSON.parse(localStorage.getItem("smartNotes"))||[];
let folders=JSON.parse(localStorage.getItem("folders"))||["Ø¹Ø§Ù…"];

let currentId=null;
let editMode=false;

function saveData(){

localStorage.setItem("smartNotes",JSON.stringify(notes));
localStorage.setItem("folders",JSON.stringify(folders));

}

function addFolder(){

let name=document.getElementById("newFolder").value;

if(!name)return;

folders.push(name);

saveData();

loadFolders();

}

function loadFolders(){

let f=document.getElementById("folderSelect");
let nf=document.getElementById("noteFolder");

f.innerHTML='<option value="all">ğŸ“ ÙƒÙ„ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª</option>';
nf.innerHTML='';

folders.forEach(x=>{

f.innerHTML+=`<option value="${x}">${x}</option>`;
nf.innerHTML+=`<option value="${x}">${x}</option>`;

});

}

function showEditor(){

editMode=false;

document.getElementById("editorView").classList.remove("hidden");
document.getElementById("notesView").classList.add("hidden");
document.getElementById("viewer").classList.add("hidden");

}

function cancelEdit(){

document.getElementById("editorView").classList.add("hidden");
document.getElementById("notesView").classList.remove("hidden");

}

function format(cmd){
document.execCommand(cmd,false,null);
}

function color(c){
document.execCommand("foreColor",false,c);
}

function image(){

let input=document.createElement("input");
input.type="file";
input.accept="image/*";

input.onchange=function(){

let reader=new FileReader();

reader.onload=function(e){

document.execCommand("insertImage",false,e.target.result);

}

reader.readAsDataURL(this.files[0]);

}

input.click();

}

function table(){

let html="<table border=1 style='width:100%'>";

html+="<tr><td contenteditable=true>Ø®Ø§Ù†Ø©</td><td contenteditable=true>Ø®Ø§Ù†Ø©</td></tr>";

html+="</table>";

document.execCommand("insertHTML",false,html);

}

function saveNote(){

let title=document.getElementById("title").value;
let text=document.getElementById("editor").innerHTML;
let folder=document.getElementById("noteFolder").value;
let reminder=document.getElementById("reminder").value;

if(!title && !text)return;

if(editMode){

let n=notes.find(x=>x.id==currentId);

n.title=title;
n.text=text;
n.folder=folder;
n.reminder=reminder;

}else{

notes.push({

id:Date.now(),
title:title,
text:text,
folder:folder,
reminder:reminder,
pinned:false

});

}

saveData();

cancelEdit();

displayNotes();

}

function displayNotes(){

let search=document.getElementById("search").value.toLowerCase();
let folder=document.getElementById("folderSelect").value;

let div=document.getElementById("notesView");

div.innerHTML="";

notes.sort((a,b)=>b.pinned-a.pinned);

notes.forEach(n=>{

if((folder=="all"||n.folder==folder)
&&(n.title.toLowerCase().includes(search)
||n.text.toLowerCase().includes(search))){

div.innerHTML+=`

<div class="note">

<h3 onclick="viewNote(${n.id})">

${n.pinned?"ğŸ“Œ ":""}${n.title}

</h3>

<small>${n.folder||""}</small>

</div>

`;

}

});

}

function viewNote(id){

let n=notes.find(x=>x.id==id);

currentId=id;

document.getElementById("notesView").classList.add("hidden");
document.getElementById("viewer").classList.remove("hidden");

document.getElementById("viewTitle").innerHTML=n.title;
document.getElementById("viewText").innerHTML=n.text;

}

function back(){

document.getElementById("viewer").classList.add("hidden");
document.getElementById("notesView").classList.remove("hidden");

}

function editCurrent(){

let n=notes.find(x=>x.id==currentId);

editMode=true;

document.getElementById("title").value=n.title;
document.getElementById("editor").innerHTML=n.text;
document.getElementById("noteFolder").value=n.folder;

document.getElementById("viewer").classList.add("hidden");
document.getElementById("editorView").classList.remove("hidden");

}

function deleteNote(id){

if(!confirm("ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ")) return;

notes=notes.filter(x=>x.id!=id);

saveData();

back();

displayNotes();

}

function pin(id){

let n=notes.find(x=>x.id==id);

n.pinned=!n.pinned;

saveData();

displayNotes();

}

function exportPDF(){

let n=notes.find(x=>x.id==currentId);

let win=window.open();

win.document.write(n.text);

win.print();

}

function toggleDark(){

document.body.classList.toggle("dark");

}

function checkReminders(){

let now=new Date().toISOString().slice(0,16);

notes.forEach(n=>{

if(n.reminder && n.reminder==now){

alert("ğŸ”” ØªØ°ÙƒÙŠØ±: "+n.title);

}

});

}

setInterval(checkReminders,60000);

loadFolders();

displayNotes();

</script>

</body>
</html>
