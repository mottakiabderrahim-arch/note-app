<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…Ø°ÙƒØ±ØªÙŠ</title>

<style>
:root{
  --bg:#f2f2f2;--card:#fff;--text:#000;--main:#2196f3;--noteSize:16px;
}
body.dark{--bg:#121212;--card:#1e1e1e;--text:#fff;}
body{margin:0;font-family:sans-serif;background:var(--bg);color:var(--text)}
header{background:var(--main);color:#fff;padding:12px;text-align:center;position:relative}
.menu-btn{position:absolute;left:10px;top:8px;font-size:22px;cursor:pointer}
.menu{display:none;position:absolute;left:10px;top:45px;background:var(--card);z-index:99;border-radius:6px}
.menu div{padding:10px;border-bottom:1px solid #ccc;cursor:pointer}
#container{padding:10px}
input{width:100%;padding:10px;margin-top:8px}
#editor{border:1px solid #ccc;border-radius:6px;min-height:120px;padding:10px;background:#fff}
.toolbar button{margin:2px}
.note{background:var(--card);margin-top:10px;padding:10px;border-radius:6px;font-size:var(--noteSize);position:relative}
.note small{display:block;color:gray}
.pin{position:absolute;right:10px;top:10px;cursor:pointer}
.delete{position:absolute;left:10px;top:10px;cursor:pointer}
.color{width:24px;height:24px;border-radius:50%;display:inline-block;cursor:pointer}
.active{outline:2px solid #000}
</style>
</head>

<body>

<header>
<span class="menu-btn" onclick="toggleMenu()">â‹®</span>
ğŸ“’ Ù…Ø°ÙƒØ±ØªÙŠ
<div class="menu" id="menu">
<div onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</div>
<div onclick="setPin()">ğŸ”’ Ø±Ù…Ø² Ø§Ù„Ù‚ÙÙ„</div>
<div onclick="changeFont(1)">ğŸ”  ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø·</div>
<div onclick="changeFont(-1)">ğŸ”¡ ØªØµØºÙŠØ± Ø§Ù„Ø®Ø·</div>
<div onclick="deleteAll()">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</div>
</div>
</header>

<div id="container">
<input id="search" placeholder="ğŸ” Ø¨Ø­Ø«" oninput="showNotes()">
<input id="title" placeholder="ğŸ“ Ø¹Ù†ÙˆØ§Ù†">

<div class="toolbar">
<button onclick="cmd('bold')">B</button>
<button onclick="cmd('italic')">I</button>
<button onclick="cmd('underline')">U</button>
<button onclick="openCamera()">ğŸ“·</button>
<input id="cam" type="file" accept="image/*" capture style="display:none">
</div>

<div>
<span class="color" style="background:black" data-c="black"></span>
<span class="color" style="background:red" data-c="red"></span>
<span class="color" style="background:blue" data-c="blue"></span>
<span class="color" style="background:green" data-c="green"></span>
</div>

<div id="editor" contenteditable="true"></div>
<button onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸</button>
<div id="notes"></div>
</div>

<script>
const editor=editorEl=document.getElementById("editor");
const notesBox=document.getElementById("notes");
const cam=document.getElementById("cam");
let notes=JSON.parse(localStorage.notes||"[]");
let edit=-1,font=parseInt(localStorage.font||16);
document.documentElement.style.setProperty("--noteSize",font+"px");

/* Ù‚ÙÙ„ */
let pin=localStorage.pin;
if(pin && prompt("ğŸ”’ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²")!==pin) document.body.innerHTML="âŒ Ø±Ù…Ø² Ø®Ø§Ø·Ø¦";

/* ÙˆØ¸Ø§Ø¦Ù */
function toggleMenu(){menu.style.display=menu.style.display=="block"?"none":"block"}
function toggleDark(){document.body.classList.toggle("dark");localStorage.dark=document.body.classList.contains("dark")}
if(localStorage.dark=="true")document.body.classList.add("dark")
function setPin(){let p=prompt("Ø¶Ø¹ Ø±Ù…Ø²");if(p)localStorage.pin=p}
function changeFont(v){font+=v;if(font<12)font=12;localStorage.font=font;document.documentElement.style.setProperty("--noteSize",font+"px")}
function cmd(c){document.execCommand(c)}
function openCamera(){cam.click()}
cam.onchange=e=>{
let r=new FileReader();
r.onload=()=>editor.innerHTML+=`<img src="${r.result}" style="max-width:100%">`;
r.readAsDataURL(e.target.files[0]);
}

/* ØªÙ„ÙˆÙŠÙ† */
document.querySelectorAll(".color").forEach(c=>{
c.onclick=()=>{document.execCommand("foreColor",false,c.dataset.c)}
});

/* Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ */
setInterval(()=>localStorage.draft=editor.innerHTML,3000);
editor.innerHTML=localStorage.draft||"";

/* Ù…Ù„Ø§Ø­Ø¸Ø§Øª */
function saveNote(){
let t=title.value,h=editor.innerHTML;
let now=new Date().toLocaleString();
let note={t,h,created:now,updated:now,pin:false};
edit==-1?notes.push(note):notes[edit]=note;
localStorage.notes=JSON.stringify(notes);
title.value=editor.innerHTML="";edit=-1;showNotes();
}
function showNotes(){
notesBox.innerHTML="";
let q=search.value.toLowerCase();
notes.sort((a,b)=>b.pin-a.pin);
notes.forEach((n,i)=>{
if(!(n.t+n.h).toLowerCase().includes(q))return;
let d=document.createElement("div");
d.className="note";
d.innerHTML=`
<span class="pin" onclick="pinNote(${i})">ğŸ“Œ</span>
<span class="delete" onclick="del(${i})">ğŸ—‘ï¸</span>
<b>${n.t}</b>
<small>ğŸ•’ ${n.created}</small>
<div>${n.h}</div>`;
notesBox.appendChild(d);
});
}
function pinNote(i){notes[i].pin=!notes[i].pin;showNotes()}
function del(i){if(confirm("Ø­Ø°ÙØŸ")){notes.splice(i,1);localStorage.notes=JSON.stringify(notes);showNotes()}}
function deleteAll(){if(confirm("Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ØŸ")){notes=[];localStorage.notes="[]";showNotes()}}
showNotes();
</script>

</body>
</html>
