<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>SmartNote ULTIMATE FINAL</title>

<style>
body{
font-family:Arial;
margin:0;
padding:15px;
background:#f0f2f5;
}

.dark{
background:#121212;
color:white;
}

.header{
display:flex;
justify-content:space-between;
align-items:center;
}

button{
padding:8px 12px;
margin:3px;
border:none;
border-radius:8px;
background:#1976d2;
color:white;
cursor:pointer;
}

.note{
background:white;
padding:12px;
margin-top:10px;
border-radius:10px;
box-shadow:0 2px 5px rgba(0,0,0,0.2);
}

.dark .note{
background:#1e1e1e;
}

#editor{
min-height:200px;
background:white;
padding:10px;
border-radius:10px;
border:1px solid #ccc;
}

.dark #editor{
background:#2a2a2a;
color:white;
}

.toolbar button{
background:#444;
}

.menu{
display:none;
position:absolute;
right:10px;
background:white;
padding:10px;
border-radius:10px;
box-shadow:0 0 10px rgba(0,0,0,0.3);
}

.dark .menu{
background:#2a2a2a;
}

.hidden{
display:none;
}
</style>

</head>
<body>

<div class="header">
<h2>ğŸ§  SmartNote ULTIMATE</h2>
<button onclick="toggleMenu()">â‹®</button>
</div>

<div id="menu" class="menu">
<button onclick="toggleDark()">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button><br>
<button onclick="backup()">ğŸ’¾ Backup</button><br>
<button onclick="restore()">ğŸ“‚ Restore</button>
</div>

<input id="search" placeholder="ğŸ” Ø¨Ø­Ø«..." oninput="displayNotes()">

<div id="notesView"></div>

<hr>

<h3 id="modeTitle">â• Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>

<input id="title" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">

<div class="toolbar">
<button onclick="format('bold')"><b>B</b></button>
<button onclick="format('italic')"><i>I</i></button>
<button onclick="format('underline')"><u>U</u></button>
<button onclick="format('insertUnorderedList')">â€¢ List</button>
<button onclick="color('red')">ğŸ”´</button>
<button onclick="color('blue')">ğŸ”µ</button>
<button onclick="color('green')">ğŸŸ¢</button>
<button onclick="size(3)">A-</button>
<button onclick="size(5)">A+</button>
<button onclick="image()">ğŸ“·</button>
<button onclick="table()">ğŸ“Š</button>
</div>

<div id="editor" contenteditable="true"></div>

<input type="datetime-local" id="reminder">

<br>

<button onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸</button>
<button onclick="clearEditor()">â• Ø¬Ø¯ÙŠØ¯</button>
<button onclick="exportPDF()">ğŸ“„ PDF</button>

<script>

let notes=JSON.parse(localStorage.getItem("ultimateNotes"))||[];
let editId=null;

function toggleMenu(){
let m=document.getElementById("menu");
m.style.display=m.style.display=="block"?"none":"block";
}

function toggleDark(){
document.body.classList.toggle("dark");
}

function format(cmd){
document.execCommand(cmd,false,null);
}

function color(c){
document.execCommand("foreColor",false,c);
}

function size(s){
document.execCommand("fontSize",false,s);
}

function image(){
let input=document.createElement("input");
input.type="file";
input.accept="image/*";

input.onchange=function(){
let reader=new FileReader();
reader.onload=function(e){
document.execCommand("insertImage",false,e.target.result);
}
reader.readAsDataURL(input.files[0]);
}
input.click();
}

function table(){
let html="<table border=1 style='width:100%'>";
html+="<tr><td contenteditable=true>Ø®Ø§Ù†Ø©</td><td contenteditable=true>Ø®Ø§Ù†Ø©</td></tr>";
html+="</table>";
document.execCommand("insertHTML",false,html);
}

function saveNote(){

let title=document.getElementById("title").value;
let text=document.getElementById("editor").innerHTML;
let reminder=document.getElementById("reminder").value;

if(!title && !text) return;

if(editId){

let n=notes.find(x=>x.id==editId);
n.title=title;
n.text=text;
n.reminder=reminder;

}else{

notes.push({
id:Date.now(),
title:title,
text:text,
date:new Date().toLocaleString(),
reminder:reminder,
pinned:false
});

}

localStorage.setItem("ultimateNotes",JSON.stringify(notes));

clearEditor();

displayNotes();
}

function clearEditor(){
editId=null;
document.getElementById("title").value="";
document.getElementById("editor").innerHTML="";
document.getElementById("modeTitle").innerText="â• Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø©";
}

function displayNotes(){

let search=document.getElementById("search").value.toLowerCase();

let div=document.getElementById("notesView");

div.innerHTML="";

notes.sort((a,b)=>b.pinned-a.pinned);

notes.forEach(n=>{

if(n.title.toLowerCase().includes(search) || n.text.toLowerCase().includes(search)){

div.innerHTML+=`

<div class="note">

<h3 onclick="viewNote(${n.id})">${n.pinned?"ğŸ“Œ":""} ${n.title}</h3>

<small>${n.date}</small><br>

<button onclick="editNote(${n.id})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>

<button onclick="pin(${n.id})">ğŸ“Œ</button>

<button onclick="del(${n.id})">ğŸ—‘ Ø­Ø°Ù</button>

</div>

`;

}

});
}

function viewNote(id){

let n=notes.find(x=>x.id==id);

alert(n.title+"\n\n"+n.text.replace(/<[^>]+>/g,''));

}

function editNote(id){

let n=notes.find(x=>x.id==id);

editId=id;

document.getElementById("title").value=n.title;
document.getElementById("editor").innerHTML=n.text;
document.getElementById("modeTitle").innerText="âœï¸ ØªØ¹Ø¯ÙŠÙ„";

}

function del(id){

if(!confirm("ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ")) return;

notes=notes.filter(x=>x.id!=id);

localStorage.setItem("ultimateNotes",JSON.stringify(notes));

displayNotes();

}

function pin(id){

let n=notes.find(x=>x.id==id);

n.pinned=!n.pinned;

localStorage.setItem("ultimateNotes",JSON.stringify(notes));

displayNotes();

}

function exportPDF(){

let win=window.open();

win.document.write("<h1>"+document.getElementById("title").value+"</h1>");

win.document.write(document.getElementById("editor").innerHTML);

win.document.write("<br><small>"+new Date().toLocaleString()+"</small>");

win.print();

}

function backup(){

let data=JSON.stringify(notes);

let blob=new Blob([data]);

let a=document.createElement("a");

a.href=URL.createObjectURL(blob);

a.download="SmartNoteBackup.json";

a.click();
}

function restore(){

let input=document.createElement("input");

input.type="file";

input.onchange=function(){

let reader=new FileReader();

reader.onload=function(){

notes=JSON.parse(reader.result);

localStorage.setItem("ultimateNotes",JSON.stringify(notes));

displayNotes();

}

reader.readAsText(input.files[0]);

}

input.click();
}

function checkReminders(){

let now=new Date().toISOString().slice(0,16);

notes.forEach(n=>{

if(n.reminder==now){

alert("ğŸ”” ØªØ°ÙƒÙŠØ±: "+n.title);

}

});

}

setInterval(checkReminders,60000);

displayNotes();

</script>

</body>
</html>
